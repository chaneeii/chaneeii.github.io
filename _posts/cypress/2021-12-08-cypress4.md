---
title: Cypress (4) Cypress Elements ì„ íƒí•˜ê¸° (data-cy ì‚¬ìš©ê³¼ ì œê±°)
date: 2021-06-15 09:21:00 +0900
categories: [Frontend Development, Cypress]
toc: true
tags: [cypress, react, typescript, styled-component]    # TAG names should always be lowercase
---

## Selecting Elements
- tag, class, id ë“±ìœ¼ë¡œ elementë¥¼ íƒ€ê²ŸíŒ…í•˜ëŠ” ê²ƒì€ ë³€í•˜ê±°ë‚˜ ì‚­ì œë  ìœ„í—˜ì´ ë§ìœ¼ë‹ˆ ì¶”ì²œí•˜ì§€ ì•ŠëŠ”ë‹¤.
- `data-*` í˜•ì‹ìœ¼ë¡œ attributeë¥¼ ë§Œë“¤ê³  ì´ì— í…ŒìŠ¤íŠ¸í•  element ì´ë¦„ì„ ë„£ì–´ë¼,
- `data-cy` ê°€ ì œì¼ ì¢‹ë‹¤(ì•„ë§ˆë„).  ì•„ë˜ ì„¸ê°œì¤‘ì— ì ë‹¹íˆ ê³¨ë¼ì„œ ì§“ëŠ”ê²Œ ë² ìŠ¤íŠ¸
  - **`data-cy`**  `data-test`  `data-testid`
- Uniqueness ìš°ì„ ìˆœìœ„ ë° ìì„¸íˆ í™•ì¸ : [ìš”ê¸°ì„œ](https://docs.cypress.io/guides/core-concepts/test-runner.html#Selector-Playground)
  1. `data-cy`
  2. `data-test`
  3. `data-testid`
  4. `id`
  5. `class`
  6. `tag`
  7. `attributes`
  8. `nth-child`
- ì˜ˆì‹œ (ê³µì‹í™ˆí˜ì´ì§€)

```html
<button
  id="main"
  class="btn btn-large"
  name="submission"
  role="button"
  data-cy="submit"
>
  Submit
</button>
```
![](https://images.velog.io/images/averycode/post/12296abc-57d2-4abf-9d55-e8c24767c901/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-15%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%205.30.20.png)

- ê³µì‹ë¬¸ì„œ
  https://docs.cypress.io/guides/references/best-practices#Selecting-Elements


cypressì—ì„œëŠ” ìœ ë‹ˆí¬í•œ ì„ íƒìë¥¼ ê²°ì •í• ë•Œ ì•„ë˜ì˜ ìˆœì„œëŒ€ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ê³  ì„ í˜¸í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê³ , ê³µì‹ ë¬¸ì„œì—ì„œ ì´ë¥¼ ëª…ì‹œí•˜ê³  ìˆë‹¤. [ê³µì‹ë¬¸ì„œ ì°¸ê³  ì˜ìƒë³´ëŸ¬ê°€ê¸°](https://docs.cypress.io/guides/core-concepts/test-runner#Best-Practices)
- **`data-cy`**
- **`data-test`**
- **`data-testid`**


## styled-componentë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°?

ì´ ì‹œë¦¬ì¦ˆì˜ ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯, cypressë¥¼ ì ìš©í•˜ë˜ ë‹¹ì‹œ styled-components í™˜ê²½ì— ë§ì¶°ì„œ ì´ë¥¼ ì„¤ì •í–ˆì–´ì•¼í–ˆëŠ”ë° ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ ë™ì  ìŠ¤íƒ€ì¼ë§ì—ì„œ cypress í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ elementsë¥¼ ì„ íƒí•˜ê¸° ì–´ë ¤ì› ë‹¤.


ê·¸ë˜ì„œ ì‚¬ìš©í•œ ë°©ë²•ì€ data-cy íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ê³ , ì´ë¥¼ ë°°í¬ì‹œì— ì œê±°í•˜ëŠ” ë°©ë²•ì„ ì±„íƒí–ˆë‹¤.

í˜¹ì€ ì•„ë˜ì™€ ê°™ì´ í•´ê²°í•˜ëŠ” ë°©ì•ˆë„ ìˆë‹¤.
- ì°¸ê³  : https://dev.to/marcostreng/how-to-add-data-attributes-to-your-component-library-and-benefit-from-them-in-your-e2e-tests-148l

### solution
```
const validateProps = (props) => {
  const newProps = {}

  Object.keys(props).forEach((key) => {
    if (key.startsWith('data-') || key === 'className') newProps[key] = props[key]
  })

  return newProps
}

```
### Usage
```
const Badge = ({ onToggle, isActive, children, ...props }) => (
  <Wrapper
    isActive={isActive}
    onClick={onToggle}
    {...validateProps(props)}
  >
    {children}
  </Wrapper>
)
```




## data-* ë°°í¬ì‹œ ì œê±°í•˜ê¸°

ì•„ë˜ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

Babel plugin for removing React properties. ğŸ’¨
- https://github.com/oliviertassinari/babel-plugin-react-remove-properties

  ```npm install --save-dev babel-plugin-react-remove-properties```


```
{
  "env": {
    "production": {
      "plugins": [
        [
          "react-remove-properties", {
            "properties": [
              "data-cy"
            ]
          }
        ]
      ]
    },
  }
}

```


<br/><br/>
### etc (css in js)
- ê·¸ì™¸ css in js í™˜ê²½ì—ì„œ cyressë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì €ì¥í•´ë’€ë˜ ë§í¬ë“¤ì¸ë° í•„ìš”í•˜ì‹  ë¶„ë“¤ì´ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ ë‚¨ê¹ë‹ˆë‹¤.
  [https://github.com/cypress-io/cypress/issues/5465](https://github.com/cypress-io/cypress/issues/5465)
  [https://github.com/cypress-io/cypress/issues/1212](https://github.com/cypress-io/cypress/issues/1212)
  [https://dev.to/marcostreng/how-to-add-data-attributes-to-your-component-library-and-benefit-from-them-in-your-e2e-tests-148l](https://dev.to/marcostreng/how-to-add-data-attributes-to-your-component-library-and-benefit-from-them-in-your-e2e-tests-148l)
  [How to work with classes that change in styled-components](https://stackoverflow.com/questions/56227456/how-to-work-with-classes-that-change-in-styled-components)
  [https://ahmed-alsaab.medium.com/working-with-dynamic-element-ids-classes-and-attributes-cypress-fe7dc7c99161](https://ahmed-alsaab.medium.com/working-with-dynamic-element-ids-classes-and-attributes-cypress-fe7dc7c99161)


### references
- https://docs.cypress.io/
- https://dev.to/marcostreng/how-to-add-data-attributes-to-your-component-library-and-benefit-from-them-in-your-e2e-tests-148l

